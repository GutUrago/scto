% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cto_dataset.R
\name{cto_dataset}
\alias{cto_dataset}
\title{Download SurveyCTO Server Datasets}
\usage{
cto_dataset(req, ids = NULL, load = TRUE, dir = tempdir(), overwrite = FALSE)
}
\arguments{
\item{req}{A \code{httr2_request} object initialized via \code{\link[=cto_request]{cto_request()}}.}

\item{ids}{A character vector of dataset IDs to download.
If \code{NULL} (the default), all available server datasets are downloaded.}

\item{load}{Logical; if \code{TRUE} (the default), the downloaded CSV files are
read into R and returned as a list of data frames. If \code{FALSE}, the function
returns a character vector of the file paths.}

\item{dir}{A string specifying the directory where CSV files will be saved.
Defaults to \code{\link[=tempdir]{tempdir()}}.}

\item{overwrite}{Logical; if \code{TRUE}, existing files in \code{dir} will be
overwritten. If \code{FALSE} (the default), existing files are skipped.}
}
\value{
\itemize{
\item If \code{load = TRUE} (default): A data frame if one or named list of data frames (one per dataset).
\item If \code{load = FALSE}: A character vector of file paths to the downloaded CSVs.
\item Returns \code{NULL} if no datasets are found or successfully downloaded.
}
}
\description{
Downloads one or more server datasets from SurveyCTO as CSV files.

By default, files are saved to a temporary directory and read into memory.
You can choose to persist files by specifying a \code{dir} or skip reading them
by setting \code{load = FALSE}.
}
\details{
This function first retrieves the list of available server datasets.
If \code{ids} is provided, it validates them against this list.
\itemize{
\item \strong{Skipping}: If \code{overwrite = FALSE}, files that already exist in \code{dir}
are skipped to save bandwidth.
\item \strong{Failures}: If a specific dataset fails to download, a warning is issued,
but the function continues downloading others.
}
}
\examples{
\dontrun{
req <- cto_request(Sys.getenv("SCTO_SERVER"), Sys.getenv("SCTO_USER"))

# 1. Download all datasets and read them into a list
all_data <- cto_dataset(req)

# 2. Download specific datasets to a specific folder (do not read)
files <- cto_dataset(req,
  ids = c("household_survey", "roster"),
  dir = "my_data_folder",
  load = FALSE
)

# 3. Force re-download of a dataset
cto_dataset(req, ids = "roster", overwrite = TRUE)
}
}
\seealso{
\code{\link[=cto_metadata]{cto_metadata()}} to list available IDs manually.
\code{\link[utils:read.table]{utils::read.csv()}} for the underlying reader used when \code{load = TRUE}.
}
