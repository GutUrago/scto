% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cto_get_form_definitions.R
\name{cto_get_form_definitions}
\alias{cto_get_form_definitions}
\title{Download SurveyCTO Form Definitions}
\usage{
cto_get_form_definitions(req, form_id, deployed_only = TRUE)
}
\arguments{
\item{req}{A \code{httr2_request} object initialized via
\code{\link{cto_request}()}.}

\item{form_id}{Character string. The unique identifier of the SurveyCTO form.}

\item{deployed_only}{Logical. If \code{TRUE} (default), only the currently deployed
form version is retrieved. If \code{FALSE}, all available historical versions are
downloaded and parsed.}
}
\value{
a \code{list}. If \code{deployed_only = TRUE}, the list contains three data frames.
}
\description{
\code{cto_get_form_definitions()} downloads the XLSForm definition for a specified SurveyCTO
form. The function can retrieve either the currently
deployed version of the form or all available historical versions.
}
\details{
The XLSForm file is downloaded from the SurveyCTO server and parsed using
\pkg{openxlsx2}. The returned object contains the three core XLSForm sheets
required to understand form structure and logic:
\code{survey}, \code{choices}, and \code{settings}.

When \code{deployed_only = FALSE}, each form version is returned as a separate
list element, named using the corresponding form version identifier.
}
\examples{
\dontrun{
# Initialize a SurveyCTO request using environment variables
req <- cto_request(read_lines = Sys.getenv("SCTO_AUTH_FILE"))

# Download the currently deployed version of a form
form_def <- cto_get_form_definitions(req, form_id = "household_survey")

# Inspect the choices sheet
print(form_def$choices)

# Download all historical versions of the form
all_defs <- cto_get_form_definitions(
  req,
  form_id = "household_survey",
  deployed_only = FALSE
)
}
}
\author{
Gutama Girja Urago
}
